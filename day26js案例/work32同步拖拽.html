<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title>work32同步拖拽</title>
		<style type="text/css">
			#div{
				width: 100px;
				height: 100px;
				background: red;
				position: absolute;
				top: 0;
				left: 0;
			}
		</style>
	</head>
	<body>
		<div id="div"></div>
	</body>
	<script type="text/javascript">
		var odiv=document.getElementById("div");
		
		odiv.onmousedown=function(ev){
			var oevent=ev||event;
			var disx=oevent.clientX-odiv.offsetLeft;
			var disy=oevent.clientY-odiv.offsetTop;
			
			document.onmousemove=function(ev){
				var oevent=ev||event;
				var l=oevent.clientX-disx;
				var t=oevent.clientY-disy;
				odiv.style.left=l+"px";
				odiv.style.top=t+"px";
				
				localStorage.dragMessage=JSON.stringify({left: odiv.offsetLeft,top: odiv.offsetTop})
			};
			
			document.onmouseup=function(){
				document.onmousemove=null;
				document.onmouseup=null;
			}
			return false;
		}
	</script>
</html>
